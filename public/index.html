<!DOCTYPE html>
<html><head><meta charset="UTF-8"><title>File Upload Portal</title><style>*{margin:0;padding:0;box-sizing:border-box}body{font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;background:linear-gradient(135deg,#667eea,#764ba2);min-height:100vh;padding:20px}.container{background:rgba(255,255,255,0.95);border-radius:20px;padding:40px;max-width:900px;margin:0 auto;box-shadow:0 20px 40px rgba(0,0,0,0.1);backdrop-filter:blur(10px)}h1{text-align:center;margin-bottom:10px;color:#333;font-size:2.5rem}h2{text-align:center;margin-bottom:30px;color:#666;font-size:1.2rem;font-weight:400}.form-group{margin-bottom:25px}label{display:block;margin-bottom:10px;font-weight:600;color:#555;font-size:16px}select,input{width:100%;padding:15px;border:2px solid #e1e5e9;border-radius:10px;font-size:16px;transition:all 0.3s}select:focus,input:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px rgba(102,126,234,0.1)}.options{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:15px;margin-top:15px}.option{border:2px solid #e1e5e9;border-radius:12px;padding:20px;cursor:pointer;text-align:center;background:#fff;transition:all 0.3s;user-select:none;font-size:14px;font-weight:500}.option:hover{border-color:#667eea;transform:translateY(-3px);box-shadow:0 8px 25px rgba(0,0,0,0.1)}.option.selected{border-color:#667eea;background:linear-gradient(135deg,#f0f4ff,#e8f0ff);color:#667eea;font-weight:600;box-shadow:0 8px 25px rgba(102,126,234,0.2)}.btn{padding:15px 30px;border:none;border-radius:10px;font-size:16px;font-weight:600;cursor:pointer;background:linear-gradient(45deg,#667eea,#764ba2);color:white;width:100%;margin-top:25px;transition:all 0.3s;position:relative;overflow:hidden}.btn:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 10px 30px rgba(102,126,234,0.4)}.btn:disabled{background:#ccc!important;cursor:not-allowed;transform:none}.btn-small{padding:8px 15px;border:none;border-radius:8px;font-size:12px;cursor:pointer;font-weight:bold;margin:0 5px;transition:all 0.2s}.btn-remove{background:#dc3545;color:white}.btn-remove:hover{background:#c82333}.hidden{display:none}.file-drop-zone{border:3px dashed #d1d5db;border-radius:12px;padding:40px;text-align:center;background:#f9fafb;transition:all 0.3s;cursor:pointer;margin-bottom:20px}.file-drop-zone.dragover{border-color:#667eea;background:#f0f4ff}.file-drop-zone:hover{border-color:#667eea;background:#f0f4ff}.drop-text{font-size:18px;color:#6b7280;margin-bottom:10px}.drop-subtext{font-size:14px;color:#9ca3af}.file-input{opacity:0;position:absolute;pointer-events:none}.file-list{margin-top:20px}.file-item{display:flex;align-items:center;justify-content:space-between;padding:20px;background:#fff;border-radius:12px;margin:15px 0;box-shadow:0 4px 15px rgba(0,0,0,0.08);border:1px solid #f0f0f0;transition:all 0.3s}.file-item:hover{box-shadow:0 8px 25px rgba(0,0,0,0.12);transform:translateY(-2px)}.file-info{flex:1;margin-left:15px}.file-name{font-weight:600;margin-bottom:8px;color:#333;font-size:15px;word-break:break-word}.file-size{font-size:13px;color:#666;margin-bottom:5px}.file-speed{font-size:11px;color:#888}.file-progress-container{margin-top:12px}.file-progress{height:8px;background:#f0f0f0;border-radius:4px;overflow:hidden;position:relative}.progress-fill{height:100%;background:linear-gradient(90deg,#667eea,#764ba2);border-radius:4px;transition:width 0.3s ease;width:0%;position:relative}.progress-fill::after{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(90deg,transparent,rgba(255,255,255,0.3),transparent);animation:shimmer 2s infinite}.file-status{padding:8px 15px;border-radius:20px;font-size:12px;font-weight:bold;text-transform:uppercase;margin-right:15px}.status-pending{background:#e9ecef;color:#495057}.status-uploading{background:#cce5ff;color:#004085}.status-completed{background:#d4edda;color:#155724}.status-failed{background:#f8d7da;color:#721c24}.overall-progress{margin:30px 0;padding:30px;background:linear-gradient(135deg,#f8f9fa,#e9ecef);border-radius:15px;display:none;border:1px solid #dee2e6}.progress-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.progress-title{font-weight:bold;font-size:20px;color:#333}.progress-stats-text{font-size:16px;color:#666}.progress-bar{height:12px;background:#e1e5e9;border-radius:6px;overflow:hidden;position:relative}.progress-bar-fill{height:100%;background:linear-gradient(90deg,#667eea,#764ba2);border-radius:6px;transition:width 0.5s ease;width:0%}.progress-details{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:20px;margin-top:20px}.progress-detail{text-align:center}.progress-detail-label{font-size:13px;color:#666;margin-bottom:5px}.progress-detail-value{font-weight:600;color:#333;font-size:16px}.message{padding:20px;border-radius:12px;margin-top:20px;text-align:center;display:none;font-weight:500;font-size:16px}.success{background:linear-gradient(135deg,#d4edda,#c3e6cb);color:#155724;border:1px solid #c3e6cb}.error{background:linear-gradient(135deg,#f8d7da,#f5c6cb);color:#721c24;border:1px solid #f5c6cb}.info{background:linear-gradient(135deg,#d1ecf1,#bee5eb);color:#0c5460;border:1px solid #bee5eb}.warning{background:linear-gradient(135deg,#fff3cd,#ffeaa7);color:#856404;border:1px solid #ffeaa7}@keyframes shimmer{0%{transform:translateX(-100%)}100%{transform:translateX(100%)}}.upload-icon{font-size:48px;margin-bottom:15px}.folder-path{background:#f8f9fa;padding:15px;border-radius:8px;margin-bottom:20px;font-family:monospace;font-size:14px;color:#666;border:1px solid #e9ecef}.folder-path strong{color:#333}</style></head><body><div class="container"><h1>üì§ File Upload Portal</h1><h2>Select destination and upload your files</h2><div class="form-group"><label>Model Name:</label><select id="modelName"><option value="">Loading models...</option></select></div><div class="form-group"><label>Platform:</label><div class="options"><div class="option" data-platform="of">üîû OF Profile</div><div class="option" data-platform="clean">‚ú® Clean</div><div class="option" data-platform="dirty">üî• Dirty</div></div></div><div class="form-group"><label>Category:</label><div class="options" id="categoryOptions"></div></div><div class="form-group hidden" id="subcategoryGroup"><label>Upload Status:</label><div class="options"><div class="option" data-subcategory="Not Uploaded">‚è≥ Not Uploaded</div><div class="option" data-subcategory="Uploaded">‚úÖ Uploaded</div></div></div><div class="form-group hidden" id="scriptTitleGroup"><label>Script Title:</label><input type="text" id="scriptTitle" placeholder="Enter script title..."></div><div class="folder-path hidden" id="folderPath"><strong>Upload Path:</strong> <span id="pathText"></span></div><div class="form-group"><label>Upload Files:</label><div class="file-drop-zone" id="dropZone"><div class="upload-icon">üìÅ</div><div class="drop-text">Drag & drop files here</div><div class="drop-subtext">or click to browse</div><input type="file" id="fileInput" class="file-input" multiple></div><div class="file-list" id="fileList"></div></div><div class="overall-progress" id="overallProgress"><div class="progress-header"><div class="progress-title">Upload Progress</div><div class="progress-stats-text" id="overallStats">0 of 0 files</div></div><div class="progress-bar"><div class="progress-bar-fill" id="overallProgressFill"></div></div><div class="progress-details"><div class="progress-detail"><div class="progress-detail-label">Status</div><div class="progress-detail-value" id="uploadStatus">Ready</div></div><div class="progress-detail"><div class="progress-detail-label">Uploaded</div><div class="progress-detail-value" id="uploadedSize">0 MB</div></div><div class="progress-detail"><div class="progress-detail-label">Speed</div><div class="progress-detail-value" id="uploadSpeed">0 MB/s</div></div><div class="progress-detail"><div class="progress-detail-label">Remaining</div><div class="progress-detail-value" id="timeRemaining">--</div></div></div></div><button class="btn" id="uploadBtn" disabled>üöÄ Start Upload</button><div class="message success" id="successMessage"></div><div class="message error" id="errorMessage"></div><div class="message info" id="infoMessage"></div><div class="message warning" id="warningMessage"></div></div><script>const API_BASE='/api';let formData={modelName:'',platform:'',category:'',subcategory:'',scriptTitle:''};let selectedFiles=[];let isUploading=false;let uploadStats={total:0,completed:0,failed:0,totalSize:0,uploadedSize:0,startTime:0};let currentFolderId=null;const platformCategories={of:['Scripts','Stories','Feed Posts'],clean:['Feed Posts','Stories','Reels'],dirty:['Photos','Videos','Reddit Verifications']};document.addEventListener('DOMContentLoaded',loadModelsAndSetup);async function loadModelsAndSetup(){setupEventListeners();await loadModels()}async function loadModels(){try{showMessage('info','Loading available models...');const response=await fetch(`${API_BASE}/models`);const data=await response.json();const select=document.getElementById('modelName');select.innerHTML='<option value="">Choose model...</option>';if(data.success&&data.models){data.models.forEach(model=>{const option=document.createElement('option');option.value=model;option.textContent=model;select.appendChild(option)})}else{['Amira','Noya','Mia','Jasmine','Thalia','Halima'].forEach(model=>{const option=document.createElement('option');option.value=model;option.textContent=model;select.appendChild(option)})}hideMessage()}catch(error){console.error('Error loading models:',error);const select=document.getElementById('modelName');select.innerHTML='<option value="">Choose model...</option>';['Amira','Noya','Mia','Jasmine','Thalia','Halima'].forEach(model=>{const option=document.createElement('option');option.value=model;option.textContent=model;select.appendChild(option)});hideMessage()}}function setupEventListeners(){const dropZone=document.getElementById('dropZone');const fileInput=document.getElementById('fileInput');dropZone.addEventListener('click',()=>fileInput.click());dropZone.addEventListener('dragover',e=>{e.preventDefault();dropZone.classList.add('dragover')});dropZone.addEventListener('dragleave',()=>dropZone.classList.remove('dragover'));dropZone.addEventListener('drop',e=>{e.preventDefault();dropZone.classList.remove('dragover');handleFiles(e.dataTransfer.files)});fileInput.addEventListener('change',e=>handleFiles(e.target.files));document.getElementById('modelName').addEventListener('change',e=>{formData.modelName=e.target.value;updatePath();updateUploadBtn()});document.getElementById('uploadBtn').addEventListener('click',startUpload);document.addEventListener('click',e=>{if(e.target.closest('.option[data-platform]')){const opt=e.target.closest('.option[data-platform]');document.querySelectorAll('[data-platform]').forEach(o=>o.classList.remove('selected'));opt.classList.add('selected');formData.platform=opt.dataset.platform;updateCategories();updatePath();updateUploadBtn()}if(e.target.closest('.option[data-category]')){const opt=e.target.closest('.option[data-category]');document.querySelectorAll('[data-category]').forEach(o=>o.classList.remove('selected'));opt.classList.add('selected');formData.category=opt.dataset.category;updateSubcategory();updatePath();updateUploadBtn()}if(e.target.closest('.option[data-subcategory]')){const opt=e.target.closest('.option[data-subcategory]');document.querySelectorAll('[data-subcategory]').forEach(o=>o.classList.remove('selected'));opt.classList.add('selected');formData.subcategory=opt.dataset.subcategory;updatePath();updateUploadBtn()}});document.getElementById('scriptTitle').addEventListener('input',e=>{formData.scriptTitle=e.target.value;updatePath();updateUploadBtn()})}function updateCategories(){const div=document.getElementById('categoryOptions');div.innerHTML='';(platformCategories[formData.platform]||[]).forEach(cat=>{const d=document.createElement('div');d.className='option';d.dataset.category=cat;d.textContent=cat;div.appendChild(d)});formData.category='';updateSubcategory()}function updateSubcategory(){const sub=document.getElementById('subcategoryGroup');const script=document.getElementById('scriptTitleGroup');sub.classList.add('hidden');script.classList.add('hidden');if(formData.platform==='of'&&formData.category){sub.classList.remove('hidden')}if(formData.category==='Scripts'){script.classList.remove('hidden')}document.querySelectorAll('[data-subcategory]').forEach(opt=>opt.classList.remove('selected'));formData.subcategory=''}function updatePath(){if(!formData.modelName||!formData.platform||!formData.category){document.getElementById('folderPath').classList.add('hidden');return}let path=`${formData.modelName}/`;path+=formData.platform==='of'?'OF Profile/':formData.platform.charAt(0).toUpperCase()+formData.platform.slice(1)+'/';path+=formData.category+'/';if(formData.category==='Scripts'&&formData.scriptTitle){path+=formData.scriptTitle+'/'}document.getElementById('pathText').textContent=path;document.getElementById('folderPath').classList.remove('hidden')}function handleFiles(files){selectedFiles=Array.from(files).map((file,index)=>({id:Date.now()+index,file:file,name:file.name,size:file.size,status:'pending',progress:0,error:null}));displayFiles();updateUploadBtn()}function displayFiles(){const list=document.getElementById('fileList');list.innerHTML='';selectedFiles.forEach(fileObj=>{const item=document.createElement('div');item.className='file-item';item.id=`file-${fileObj.id}`;item.innerHTML=`<div style="font-size:32px;">${getFileIcon(fileObj.file.type)}</div><div class="file-info"><div class="file-name">${fileObj.name}</div><div class="file-size">${formatFileSize(fileObj.size)}</div><div class="file-progress-container hidden"><div class="file-progress"><div class="progress-fill"></div></div></div></div><div style="display:flex;align-items:center;flex-direction:column;gap:10px;"><span class="file-status status-pending">Pending</span><div><button class="btn-small btn-remove" onclick="removeFile('${fileObj.id}')">Remove</button></div></div>`;list.appendChild(item)})}function removeFile(fileId){selectedFiles=selectedFiles.filter(f=>f.id!=fileId);const element=document.getElementById(`file-${fileId}`);if(element)element.remove();updateUploadBtn()}function updateUploadBtn(){const valid=formData.modelName&&formData.platform&&formData.category&&selectedFiles.length>0&&(formData.platform!=='of'||formData.subcategory)&&(formData.category!=='Scripts'||formData.scriptTitle);document.getElementById('uploadBtn').disabled=!valid||isUploading}async function startUpload(){if(!selectedFiles.length)return;try{showMessage('info','Creating folder structure...');const folderResponse=await fetch(`${API_BASE}/create-folder-path`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({modelName:formData.modelName,platform:formData.platform,category:formData.category,scriptTitle:formData.scriptTitle})});const folderResult=await folderResponse.json();if(!folderResult.success){throw new Error(folderResult.error||'Failed to create folder structure')}currentFolderId=folderResult.folderId;isUploading=true;updateUploadBtn();showOverallProgress();uploadStats={total:selectedFiles.length,completed:0,failed:0,totalSize:selectedFiles.reduce((sum,f)=>sum+f.size,0),uploadedSize:0,startTime:Date.now()};showMessage('info','Starting file uploads...');await uploadFiles()}catch(error){showMessage('error','Upload failed: '+error.message);isUploading=false;updateUploadBtn()}}async function uploadFiles(){const formDataObj=new FormData();formDataObj.append('folderId',currentFolderId);selectedFiles.forEach(fileObj=>{formDataObj.append('files',fileObj.file);fileObj.status='uploading';updateFileDisplay(fileObj)});try{const xhr=new XMLHttpRequest();let lastLoaded=0;let lastTime=Date.now();xhr.upload.addEventListener('progress',e=>{if(e.lengthComputable){const now=Date.now();const timeDiff=now-lastTime;const bytesDiff=e.loaded-lastLoaded;const percentage=(e.loaded/e.total)*100;updateOverallProgressBar(percentage);if(timeDiff>1000){const speed=bytesDiff/(timeDiff/1000);updateUploadStats(e.loaded,speed);lastLoaded=e.loaded;lastTime=now}}});xhr.onload=function(){if(xhr.status===200){const result=JSON.parse(xhr.responseText);handleUploadResults(result)}else{throw new Error(`Upload failed: ${xhr.status} ${xhr.statusText}`)}};xhr.onerror=function(){throw new Error('Network error during upload')};xhr.open('POST',`${API_BASE}/upload`);xhr.send(formDataObj)}catch(error){showMessage('error','Upload error: '+error.message);selectedFiles.forEach(f=>{if(f.status==='uploading'){f.status='failed';f.error=error.message;updateFileDisplay(f)}});isUploading=false;updateUploadBtn()}}function handleUploadResults(result){selectedFiles.forEach(fileObj=>{const fileResult=result.results.find(r=>r.fileName===fileObj.name);if(fileResult){if(fileResult.success){fileObj.status='completed';fileObj.progress=100;uploadStats.completed++}else{fileObj.status='failed';fileObj.error=fileResult.error;uploadStats.failed++}}updateFileDisplay(fileObj)});isUploading=false;updateUploadBtn();updateOverallProgressBar(100);if(result.success){showMessage('success',`üéâ ${result.message}`)}else{showMessage('warning',result.message)}}function updateFileDisplay(fileObj){const item=document.getElementById(`file-${fileObj.id}`);if(!item)return;const status=item.querySelector('.file-status');const progressContainer=item.querySelector('.file-progress-container');const progress=item.querySelector('.progress-fill');status.className=`file-status status-${fileObj.status}`;status.textContent=getStatusText(fileObj.status);if(fileObj.status==='uploading'){progressContainer.classList.remove('hidden');progress.style.width=fileObj.progress+'%'}else if(fileObj.status==='completed'){progressContainer.classList.remove('hidden');progress.style.width='100%'}else{progressContainer.classList.add('hidden')}}function getStatusText(status){const texts={pending:'Pending',uploading:'Uploading',completed:'‚úÖ Done',failed:'‚ùå Failed'};return texts[status]||status}function showOverallProgress(){document.getElementById('overallProgress').style.display='block'}function updateOverallProgressBar(percentage){document.getElementById('overallProgressFill').style.width=percentage+'%';const completed=uploadStats.completed;const total=uploadStats.total;document.getElementById('overallStats').textContent=`${completed} of ${total} files`;document.getElementById('uploadStatus').textContent=percentage===100?'Complete!':'Uploading...'}function updateUploadStats(uploadedBytes,speed){document.getElementById('uploadedSize').textContent=formatFileSize(uploadedBytes);document.getElementById('uploadSpeed').textContent=speed>0?formatFileSize(speed)+'/s':'0 MB/s';const remainingBytes=uploadStats.totalSize-uploadedBytes;const eta=speed>0?remainingBytes/speed:0;document.getElementById('timeRemaining').textContent=eta>0?formatTime(eta):'--'}function formatTime(seconds){if(seconds<60)return Math.round(seconds)+'s';if(seconds<3600)return Math.round(seconds/60)+'m';return Math.round(seconds/3600)+'h'}function getFileIcon(type){if(type.startsWith('image/'))return'üñºÔ∏è';if(type.startsWith('video/'))return'üé•';if(type.startsWith('audio/'))return'üéµ';return'üìÑ'}function formatFileSize(bytes){if(!bytes)return'0 Bytes';const k=1024;const sizes=['Bytes','KB','MB','GB','TB'];const i=Math.floor(Math.log(bytes)/Math.log(k));return parseFloat((bytes/Math.pow(k,i)).toFixed(2))+' '+sizes[i]}function showMessage(type,message){hideMessage();const msg=document.getElementById(type+'Message');if(msg){msg.textContent=message;msg.style.display='block'}}function hideMessage(){document.querySelectorAll('.message').forEach(m=>m.style.display='none')}</script></body></html>
